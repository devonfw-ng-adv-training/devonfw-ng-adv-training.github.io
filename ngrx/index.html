<!DOCTYPE html >
<html>
  <head>
    <title>Introduction to Redux/NGRX</title>
    <meta charset="utf-8"/>
    <meta name="author" content=" "/>
    <meta name="description" content="Redux 101"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"/>
    <link rel="icon" href="../common/img/favicon.ico"/>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet"/>
    <link rel="stylesheet" href="../reveal.js-3.6.0/css/reveal.css"/>
    <link rel="stylesheet" href="../reveal.js-3.6.0/css/theme/white.css"/>
    <link rel="stylesheet" href="../common/css/common.css"/>
    <link rel="stylesheet" href="custom.css"/><!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../reveal.js-3.6.0/lib/css/zenburn.css"/><!-- Printing and PDF exports -->
    <script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? '../reveal.js-3.6.0/css/print/pdf.css' : '../reveal.js-3.6.0/css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
      
    </script>
    <style>
      section.agenda ul {
          list-style: none
          margin: 0
          color: var(--cap-white)
      }    
      
      
    </style>
  </head>
</html>
<body>
  <div class="reveal">
    <div class="slides">       
      <section id="title-0" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Redux 101</h2>
        <body class="white">
          <p class="credits">INTRODUCTION TO REDUX ARCHITECTURE</p>
        </body>
      </section>
      <section id="agenda-1" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Agenda</h2>
        <body class="white">
          <ul class="no-bullet"> 
            <li class="fragment">
              <h3 class="white">Learn</h3>
              <ul>     
                <li>What is application state?</li>
                <li>What is Redux?</li>
                <li>How to write code with Redux?                                 </li>
              </ul>
            </li>
            <li class="fragment"> 
              <h3 class="white">Build</h3>
              <ul>     
                <li>Live coding </li>
                <li>Exercise        </li>
              </ul>
            </li>
            <li class="fragment"> 
              <h3 class="white">Further learning   </h3>
            </li>
          </ul>
        </body>
      </section>
      <section id="agenapplicationstateda-2" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">What is an application state?</h2>
        <body class="white">
          <h3></h3>All the data that an application needs at given moment:
          <ul>
            <li class="fragment">To display UI of given structure and content (User Interactions and Input)</li>
            <li class="fragment">To perform some actions (Authentication Tokens)</li>
            <li class="fragment">To provide behaviour persistency (Server Responses)</li>
          </ul>
        </body>
      </section>
      <section id="redux-3" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">What is Redux?</h2>
        <body class="white">
          <ul>
            <li class="fragment">Simple, reliable and scalable application architecture (e.g. Facebook)</li>
            <li class="fragment">Small set of building blocks used to manage application state</li>
            <li class="fragment">A way of thinking about where to put business logic</li>
          </ul>
        </body>
      </section>
      <section id="principles-4" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Three Principles of Redux</h2>
        <body class="white">
          <ul>
            <li class="fragment">Single Source of Truth</li>
            <li class="fragment">State is read only</li>
            <li class="fragment">Changes are made with pure functions (i.e. reducers)</li>
          </ul>
        </body>
      </section>
      <section id="schema-5" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">General Redux Schema</h2>
        <body class="white"><img src="img/schema.png"/></body>
      </section>
      <section id="simple-example-6" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Simple Example</h2>
        <body class="white"><a href="https://codepen.io/anon/pen/MGMWPQ" target="_blank">Codepen           </a></body>
      </section>
      <section id="demo-7" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Live Coding Session</h2>
        <body class="white"></body>
      </section>
      <section id="demo-step-1-8" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 1</h2>
        <body class="white">
          <ul>
            <li>Install @ngrx/store package</li>
            <li>Write your first reducer, hint: (State, Action) => State</li>
            <li>Add initial, default state to your reducer</li>
            <li>Wire up the reducer with the module using StoreModule.forRoot method and ActionReducerMap</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-2-9" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 2</h2>
        <body class="white">
          <ul>
            <li>Inject Store<NgrxModuleState> to the BooksShelfComponent</li>
            <li>Use the store to render books in BooksShelfComponent:
              <ul>
                <li>Stop using the service in getData</li>
                <li>Fetch all books from the store using select operator,</li>
                <li>Temporarily subscribe to the store and assign them to the existing books field</li>
                <li>Map the book collection to a filtered one, based on this.mode (if set)</li>
              </ul>
            </li>
          </ul>
        </body>
      </section>
      <section id="demo-step-3-10" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 3</h2>
        <body class="white">
          <ul>
            <li>Refactor BooksShelfComponent to use | async instead of subscribing to books</li>
            <li>Extract books selection logic to store/selectors.ts, use createSelector function,</li>
            <li>Write a unit test for your reducer        </li>
          </ul>
        </body>
      </section>
      <section id="demo-step-4-11" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 4 (1 of 2)</h2>
        <body class="white">
          <ul>
            <li>Implement UpdateBook action that will be dispatched when e.g. moving a book</li>
            <li>Handle updating a book in the reducer:
              <ul>
                <li>Notice that there's no invariant property, so introduce id</li>
                <li>Assign unique id to a NgrxBook, use uuid package</li>
                <li>Handle an update action that carries an id</li>
              </ul>
            </li>
          </ul>
        </body>
      </section>
      <section id="demo-step-4-2-12" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 4 (2 of 2)</h2>
        <body class="white">
          <ul>         
            <li>Test the reducer (think of it as comparing state after passing an action with expected state)</li>
            <li>Dispatch the update action on book move (BookShelfComponent)</li>
          </ul>
        </body>
      </section>
      <section id="effects-13" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Redux Schema With Effects</h2>
        <body class="white"><img src="img/schema-effects.png"/></body>
      </section>
      <section id="demo-step-5-14" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 5 (1 of 2)</h2>
        <body class="white">
          <ul>
            <li>Remove unused methods from ShelfService</li>
            <li>Add ShelfService.fetchBooks method that will return books with some delay, to emulate the HTTP request behaviour (maybe use timer from rxjs)</li>
            <li>Be sure that ShelfService returns other titles than in the default state</li>
            <li>Install @ngrx/effects package</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-5.2-15" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 5 (2 of 2)</h2>
        <body class="white">
          <ul>
            <li>Add LoadBooks and BooksLoaded actions, handle them in the reducer (add loading: boolean state)</li>
            <li>Write an effect that reloads books on LoadBooks action and emits BooksLoaded action</li>
            <li>Register the effect with EffectsModule.forRoot</li>
            <li>Add a button that will dispatch LoadBooks action</li>
          </ul>
        </body>
      </section>
      <section id="excercise-1-16" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Excercise 1</h2>
        <body class="white">
          <p>Implement adding new book: </p>
          <ul> 
            <li>Create AddBook action </li>
            <li>Handle the action in the reducer </li>
            <li>Dispatch the action in BooksShelfComponent</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-6-17" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 6</h2>
        <body class="white">
          <ul>
            <li>Install @ngrx/store-devtools</li>
            <li>Install in your web browser the <a href="http://zalmoxisus.github.io/redux-devtools-extension/" target="_blank">Redux Devtools Extension</a></li>
            <li>
              Wire-up StoreDevToolsModule.instrument({ maxAge: 25 }) with your module</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-2-18" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 7 (1 of 2)</h2>
        <body class="white">
          <ul>
            <li>Install @ngrx/router-store package</li>
            <li>Extend NgrxModuleState to have router key of type RouterReducerState<RouterStateUrl> - the RouterStateUrl was implemented for you in store/router-store.ts</li>
            <li>Import and register routerReducer in your present ActionReducerMap (suggested key: router)</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-7-2)-19" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 7 (2 of 2)</h2>
        <body class="white">
          <ul>
            <li>Wire up StoreRouterConnectingModule.forRoot({ stateKey: 'router' }) with your module</li>
            <li>Add { provide: RouterStateSerializer, useClass: CustomSerializer } to your module providers. CustomSerializer is implemented in store/router-store.ts.</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-8-20" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Step 8</h2>
        <body class="white">
          <ul>
            <li>Go to your reducer and clear items in the initial state,</li>
            <li>Go to books-shelf.component.html and hide div.collection_container when books are not loaded with *ngIf</li>
            <li>Add there a notification that books are loading</li>
          </ul>
        </body>
      </section>
      <section id="excercise-3-21" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Excercise 2</h2>
        <body class="white">
          <ul>
            <li>Add an Effect to your effects class, that will start fetching books when ROUTER_NAVIGATION action appears</li>
            <li>Write selectors that will help you get store.router.state.params.collection that tells which shelf is selected.</li>
            <li>Use these selectors to set mode in BooksShelfComponent.</li>
          </ul>
        </body>
      </section>
      <section id="excercise-3-22" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Excercise 3</h2>
        <body class="white">
          <ul> 
            <li>Use the effect from Ex2 to pass collection from router store to ShelfService.getData</li>
            <li>Adjust ShelfService.getData to filter out books depending on the collection (optional argument)</li>
            <li>Hide shelves in BooksShelfComponent based on the value of mode$ (collection).</li>
            <li>Remove data filtering data logic from BooksShelfComponent</li>
          </ul>
        </body>
      </section>
      <section id="demo-step-final-23" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Final Step</h2>
        <body class="white">
          <ul>
            <li>Install jasmine-marbles</li>
            <li>Write a hot marble/observable that will emulate a stream of actions</li>
            <li>Write a cold marble/observable that will emulate the behaviour of the effect</li>
            <li>Compare them using expect(...).toBeObservable(...)</li>
          </ul>
        </body>
      </section>
      <section id="learn-more-24" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_CapgeminiBlue_RGB.svg">
        <h2 class="white">Learn more</h2>
        <body class="white">
          <ul>
            <li> <a href="https://redux.js.org/" target="_blank">redux.js.org</a></li>
            <li> <a href="https://ultimateangular.com/" target="_blank">NGRX State Management - ultimateangular.com</a></li>
            <li> <a href="https://egghead.io/courses/getting-started-with-redux" target="_blank">Getting Started with Redux</a></li>
            <li> <a href="https://www.youtube.com/watch?v=6Z-1v1UnoM8" target="_blank">Todd Motto - Understand NGRX by building a Store - Keynote</a></li>
          </ul>
        </body>
      </section>
      <section id="title-25" data-transition="slide" data-background-image="../common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_CapgeminiBlue_RGB.svg">
        <h2 class="white">Thank you</h2>
        <body class="white"></body>
      </section>
    </div>
  </div>
  <script src="../reveal.js-3.6.0/lib/js/head.min.js"></script>
  <script src="../reveal.js-3.6.0/js/reveal.js"></script>
  <script>
     Reveal.initialize({
      // controls: true,
     //  progress: true,
       history: true,
     //  center: true,
     //  rollingLinks: true,
    //   transition: "convex",
       //- width: "90%",
       //- height: 1.0,
       dependencies: [
         // Syntax highlight for <code> elements
          {
               src: '../reveal.js-3.6.0/lib/js/classList.js', condition: function() {
                   return !document.body.classList;
               }
           },
           {
               src: '../reveal.js-3.6.0/plugin/highlight/highlight.js', async: true, callback: function() {
                   hljs.initHighlightingOnLoad();
               }
           },
           {src: '../reveal.js-3.6.0/plugin/search/search.js', async: true},
           {src: '../reveal.js-3.6.0/plugin/zoom-js/zoom.js', async: true},
           {src: '../reveal.js-3.6.0/plugin/notes/notes.js', async: true}      
       ]
     });
  </script>
</body>